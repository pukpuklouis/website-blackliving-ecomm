/* packages/tailwind-config/styles.css */
@config "./tailwind.config.js";
@import "tailwindcss";
@import "./theme.css";
@import "tw-animate-css";
@plugin "@blackliving/tailwindcss-typography";

@custom-variant dark (&:is(.dark *));

@source "../../packages/ui/src/**/*.{ts,tsx}";
@source "../../packages/ui/components/**/*.{ts,tsx}";
@source "../../apps/web/src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}";
@source "../../apps/admin/src/**/*.{ts,tsx}";

:root {
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

.dark {
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Typography plugin CSS variables for better dark mode integration */
  --color-prose-body: var(--color-foreground);
  --color-prose-headings: var(--color-foreground);
  --color-prose-lead: var(--color-muted-foreground);
  --color-prose-links: var(--color-primary);
  --color-prose-bold: var(--color-foreground);
  --color-prose-counters: var(--color-muted-foreground);
  --color-prose-bullets: var(--color-muted-foreground);
  --color-prose-hr: var(--color-border);
  --color-prose-quotes: var(--color-muted-foreground);
  --color-prose-quote-borders: var(--color-border);
  --color-prose-captions: var(--color-muted-foreground);
  --color-prose-kbd: var(--color-muted-foreground);
  --color-prose-kbd-shadows: var(--color-primary);
  --color-prose-code: var(--color-accent-foreground);
  --color-prose-pre-code: var(--color-muted);
  --color-prose-pre-bg: var(--color-muted);
  --color-prose-th-borders: var(--color-border);
  --color-prose-td-borders: var(--color-border);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }
}

.bn-editor-style {
  /*container without focus ring*/
  .bn-container {
    --bn-colors-editor-text: var(--color-foreground);
    --bn-colors-editor-background: var(--color-background);
  }
  /* Drag handle / side menu tightening */
  /* Button sizing */
  .bn-side-menu .bn-button {
    margin: 2px;
    align-self: flex-start;
    width: 22px;
    height: 22px;
    padding: 0;
    border-radius: 6px;
  }

  /* Icon size inside buttons */
  .bn-side-menu .bn-button svg {
    width: 14px;
    height: 14px;
  }

  /* Add block (+) button alignment */
  .bn-toggle-add-block-button {
    margin: 1px 0;
    text-align: left;
  }

  /* Side menu container alignment */
  .bn-side-menu {
    align-items: center;
    gap: 1px;
    margin-left: -6px;
  }
}

/* BlockNote placeholder behavior and tone */
/* Only keep document-level placeholder (handled in editor dictionary).
   If any per-block placeholders slip through, keep them subtle. */
.bn-editor-style [data-placeholder],
.bn-editor-style .bn-placeholder {
  color: color-mix(in oklab, var(--color-muted-foreground) 80%, transparent);
}

/* Blog-specific styles - Enhanced with Typography Plugin */
.blog {
  /* Use prose classes for better typography */
  .blog-content {
    /* Add scroll margin for headings - this enhances the prose plugin */
    & :is(h1, h2, h3, h4, h5, h6) {
      @apply scroll-mt-20;
    }

    /* Enhanced selection styling */
    & ::selection {
      @apply bg-primary/20 text-primary-foreground;
    }

    /* Better focus styles for accessibility */
    & a:focus {
      @apply outline-2 outline-primary outline-offset-2;
    }

    /* Better spacing for nested lists */
    & :is(ul, ol) :is(ul, ol) {
      @apply mt-2 mb-2;
    }
  }

  /* Blog navigation and UI elements */
  .blog-breadcrumb a {
    @apply transition-colors duration-200;
  }

  .blog-category-tag {
    @apply transition-all duration-200 hover:scale-105;
  }

  .blog-share-button {
    @apply transition-all duration-200 hover:scale-105 hover:shadow-lg;
  }

  .blog-tag {
    @apply transition-colors duration-200 hover:bg-gray-200;
  }

  .blog-related-post {
    @apply transition-all duration-300 hover:transform hover:scale-105;
  }
}
