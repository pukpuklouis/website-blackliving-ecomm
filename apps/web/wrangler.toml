name = "blackliving-web"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "./dist"

# Assets binding not needed for Pages deployment
# [assets]
# directory = "./dist"
# binding = "ASSETS"

# Better Auth Session Storage (temporarily disabled)
# [[kv_namespaces]]
# binding = "SESSION"
# id = "local-session-kv-id"
# preview_id = "local-session-preview-kv-id"

[env.preview]
name = "blackliving-web-preview"

# [[env.preview.kv_namespaces]]
# binding = "SESSION"
# id = "preview-session-kv-id"
# preview_id = "preview-session-preview-kv-id"

[env.production]
name = "blackliving-web"

# [[env.production.kv_namespaces]]
# binding = "SESSION"
# id = "prod-session-kv-id"
# preview_id = "prod-session-preview-kv-id"

# Environment Variables
[vars]
NODE_ENV = "development"
API_BASE_URL = "http://localhost:8787"
PUBLIC_API_BASE_URL = "http://localhost:8787"
PUBLIC_API_URL = "http://localhost:8787"
PUBLIC_SITE_URL = "http://localhost:4321"

[env.preview.vars]
NODE_ENV = "preview"
API_BASE_URL = "https://blackliving-api-staging.pukpuk-tw.workers.dev"
PUBLIC_API_BASE_URL = "https://blackliving-api-staging.pukpuk-tw.workers.dev"
PUBLIC_API_URL = "https://blackliving-api-staging.pukpuk-tw.workers.dev"
PUBLIC_SITE_URL = "https://staging.blackliving-web.pages.dev"

[env.production.vars]
NODE_ENV = "production"
API_BASE_URL = "https://blackliving-api.pukpuk-tw.workers.dev"
PUBLIC_API_BASE_URL = "https://blackliving-api.pukpuk-tw.workers.dev"
PUBLIC_API_URL = "https://blackliving-api.pukpuk-tw.workers.dev"
PUBLIC_SITE_URL = "https://blackliving-web.pages.dev"

[observability]
enabled = true