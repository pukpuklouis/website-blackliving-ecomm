---
import BaseLayout from './BaseLayout.astro';
import Breadcrumbs from '../components/blog/Breadcrumbs.astro';
import PostHeader from '../components/blog/PostHeader.astro';
import BlogHeroImage from '../components/blog/BlogHeroImage.astro';
import BlogContent from '../components/blog/BlogContent.astro';
import BlogSidebar from '../components/blog/BlogSidebar.astro';
import BlogTags from '../components/blog/BlogTags.astro';
import RelatedPosts from '../components/blog/RelatedPosts.astro';
import PromoImage from '../components/blog/PromoImage.astro';
import AdSpace from '../components/blog/AdSpace.astro';

interface BlogPost {
  id: string;
  title: string;
  slug: string;
  description: string;
  excerpt: string;
  content: string;
  authorName: string;
  category: string;
  categoryId: string;
  tags: string[];
  featuredImage: string;
  publishedAt: string;
  viewCount: number;
  readingTime: number;
  seoTitle?: string;
  seoDescription?: string;
}

interface PostCategory {
  id: string;
  name: string;
  slug: string;
  description: string;
  color: string;
  icon: string;
}

export interface Props {
  post: BlogPost;
  category?: PostCategory | null;
  relatedPosts?: BlogPost[];
  seoTitle: string;
  seoDescription: string;
  ogImage: string;
}

const { post, category, relatedPosts = [], seoTitle, seoDescription, ogImage } = Astro.props;
---

<BaseLayout
  title={seoTitle}
  description={seoDescription}
  image={ogImage}
  type="article"
  publishedTime={post.publishedAt}
  class="blog"
>
  <!-- Hero Image Section -->
  <BlogHeroImage image={post.featuredImage} alt={post.title} />

  <main class="container max-w-4xl mx-auto px-4 py-8">
    <!-- Breadcrumbs -->
    <Breadcrumbs post={post} category={category} />

    <!-- Main Content Grid: Content + Sidebar -->
    <div class="max-w-5xl mx-auto">
      <!-- Main Content Column  -->
      <div class="">
        <article>
          <!-- Post Header: Title, Meta -->
          <PostHeader post={post} category={category} />

          <!-- Main Blog Content -->
          <BlogContent content={post.content} className="mb-12" />

          <!-- Page-specific content slot -->
          <slot />

          <!-- Related Posts (within main content) -->
          <RelatedPosts posts={relatedPosts} layout="inline" />
        </article>
      </div>
    </div>
  </main>
</BaseLayout>
