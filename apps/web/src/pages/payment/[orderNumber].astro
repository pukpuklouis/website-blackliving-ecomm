---
import BaseLayout from "../../layouts/BaseLayout.astro";

const { orderNumber } = Astro.params;
const title = "訂單付款 | Black Living";
const description = "安全付款網關";
---

<BaseLayout {title} {description} showFooter={false}>
  <main
    class="container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]"
  >
    <div
      class="max-w-md w-full bg-white p-8 rounded-lg shadow-sm border border-stone-200 text-center"
    >
      <div id="loading-state">
        <div
          class="animate-spin rounded-full h-10 w-10 border-b-2 border-stone-900 mx-auto mb-4"
        ></div>
        <h1 class="text-xl font-medium text-stone-900">正在準備付款資料...</h1>
        <p class="text-stone-500 mt-2">請稍候，我們正在連線至金流系統</p>
      </div>

      <div id="error-state" class="hidden">
        <div
          class="bg-red-50 text-red-800 p-4 rounded-lg mb-4 text-left text-sm"
        >
          <p class="font-bold mb-1">無法開始付款</p>
          <p id="error-message">找不到訂單或是訂單狀態不正確。</p>
        </div>
        <a
          href="/"
          class="inline-block bg-stone-900 text-white px-6 py-2 rounded hover:bg-stone-800 transition-colors"
        >
          返回首頁
        </a>
      </div>

      <div id="payment-state" class="hidden">
        <div class="mb-6">
          <div
            class="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-8 h-8"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"
              />
            </svg>
          </div>
          <h1 class="text-2xl font-bold text-stone-900 mb-2">訂單付款</h1>
          <p class="text-stone-600">
            訂單編號：<span class="font-mono text-stone-900"
              >{orderNumber}</span
            >
          </p>
          <div class="mt-4 p-4 bg-stone-50 rounded-lg">
            <p class="text-sm text-stone-500 mb-1">應付金額</p>
            <p class="text-3xl font-bold text-stone-900" id="payment-amount">
              NT$ -
            </p>
          </div>
        </div>

        <button
          id="pay-now-btn"
          class="w-full bg-stone-900 text-white px-6 py-3 rounded-lg hover:bg-stone-800 font-medium transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-md hover:shadow-lg"
        >
          前往付款
        </button>

        <p class="text-xs text-stone-400 mt-4 text-center">
          點擊按鈕後將導向 GOMYPAY 安全支付頁面
        </p>
      </div>

      <div id="success-state" class="hidden">
        <div
          class="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-8 h-8"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
            />
          </svg>
        </div>
        <h1 class="text-2xl font-bold text-stone-900 mb-2">已完成付款</h1>
        <p class="text-stone-600 mb-6">
          您的訂單已經付款成功，我們會盡快為您出貨。
        </p>
        <a
          href="/"
          class="inline-block bg-stone-900 text-white px-6 py-2 rounded hover:bg-stone-800 transition-colors"
        >
          繼續購物
        </a>
      </div>
    </div>
  </main>
</BaseLayout>

<script define:vars={{ orderNumber }}></script>
