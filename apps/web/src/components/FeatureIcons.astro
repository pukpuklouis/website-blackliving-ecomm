---
import { Image } from 'astro:assets';
import { getEntry } from 'astro:content';

// Feature icons section for Black Living homepage
interface FeatureItem {
  icon: string;
  title: string;
  description: string;
}

export interface Props {
  features?: FeatureItem[];
}

const { features = [] } = Astro.props;

// Get default features from content collection
const featuresCollection = await getEntry('features', 'default');
const defaultFeatures = featuresCollection?.data.defaultFeatures || [];

const featuresToShow: FeatureItem[] = features.length > 0 ? features : defaultFeatures;
---

<section class='py-16 bg-gray-50'>
  <div class='container mx-auto px-4'>
    <h2 class='text-2xl md:text-3xl font-sans text-gray-800 font-bold text-center mb-12'>價格安心 x 服務貼心 x 品質放心</h2>

    <div class='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-8 px-8 md:px-0 mx-auto'>
      {
        featuresToShow.map(feature => (
          <div class='text-center'>
            {feature.icon && (
              <Image
                src={feature.icon}
                alt={feature.title}
                width={400}
                height={400}
                loading='eager'
                class='size-42 object-contain mx-auto'
              />
            )}
            <h3 class='text-2xl text-gray-700 font-semibold mb-3'>{feature.title}</h3>
            <p class='text-gray-600'>{feature.description}</p>
          </div>
        ))
      }
    </div>
  </div>
</section>
