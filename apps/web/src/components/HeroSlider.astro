---
// Hero slider component for homepage, now using shadcn/ui Carousel
import { getCollection } from "astro:content";
import HeroCarousel from "./HeroCarousel.tsx";

const heroSliderCollection = await getCollection("hero-slider");
const slides =
  heroSliderCollection[0]?.data.slideset.slides?.map((s) => ({
    data: s,
  })) || [];

// Prepare desktop and mobile slides with appropriate images
const desktopSlides = slides.map((slide) => ({
  data: { ...slide.data, image: slide.data.image },
}));

const mobileSlides = slides.map((slide) => ({
  data: { ...slide.data, image: slide.data.mobileImage || slide.data.image },
}));
---

<!-- Desktop version (md and up) -->
<section class="hidden md:block relative overflow-hidden">
  {slides?.length && <HeroCarousel slides={desktopSlides} aspectRatio="horizontal" client:load />}
</section>

<!-- Mobile version (below md) -->
<section class="block md:hidden relative overflow-hidden">
  {slides?.length && <HeroCarousel slides={mobileSlides} aspectRatio="vertical" client:load />}
</section>
