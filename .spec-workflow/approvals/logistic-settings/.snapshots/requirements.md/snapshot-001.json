{
  "id": "snapshot_1764505956355_6ydk5dcwr",
  "approvalId": "approval_1764505956339_tq8g7xkmu",
  "approvalTitle": "Logistic Settings Requirements",
  "version": 1,
  "timestamp": "2025-11-30T12:32:36.355Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements Document\n\n## Introduction\n\nThis feature enables administrators to configure logistic fees and free shipping thresholds directly via the admin panel. Currently, these values are hardcoded in the frontend, requiring code changes for any adjustments. This feature introduces a dynamic settings system to provide flexibility and ease of management.\n\n## Alignment with Product Vision\n\nThis aligns with the goal of creating a robust and user-friendly e-commerce platform where business rules can be managed by site administrators without developer intervention. It enhances the `apps/admin` capabilities and ensures the `apps/web` frontend reflects real-time business decisions.\n\n## Requirements\n\n### Requirement 1: Logistic Settings Management\n\n**User Story:** As an Administrator, I want to view and update the shipping fee and free shipping threshold in the admin panel, so that I can adjust them based on business needs.\n\n#### Acceptance Criteria\n\n1. WHEN the admin navigates to the new \"Settings\" page, THEN the system SHALL display the current \"Shipping Fee\" and \"Free Shipping Threshold\".\n2. IF the settings have not been configured yet, THEN the system SHALL display default values (1500 for fee, 30000 for threshold).\n3. WHEN the admin modifies the values and clicks \"Save\", THEN the system SHALL update the settings in the database.\n4. IF the input values are invalid (e.g., negative numbers), THEN the system SHALL prevent saving and show an error message.\n\n### Requirement 2: Dynamic Shipping Fee Calculation\n\n**User Story:** As a Customer, I want the shipping fee to be calculated based on the current store settings, so that I am charged the correct amount.\n\n#### Acceptance Criteria\n\n1. WHEN the customer adds items to the cart, THEN the system SHALL calculate the shipping fee using the values from the settings.\n2. IF the cart subtotal is greater than or equal to the \"Free Shipping Threshold\", THEN the shipping fee SHALL be 0.\n3. IF the cart subtotal is less than the \"Free Shipping Threshold\", THEN the shipping fee SHALL be the configured \"Shipping Fee\".\n4. WHEN the settings are updated in the admin panel, THEN the frontend SHALL reflect these changes (potentially after a refresh or new session).\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n- **Single Responsibility Principle**: The settings logic should be encapsulated in its own module/service.\n- **Modular Design**: The settings UI should be a distinct component in the admin panel.\n- **Clear Interfaces**: The API for settings should be simple and typed.\n\n### Performance\n- The settings should be fetched efficiently. Consider caching on the frontend (e.g., in the Zustand store) to avoid repeated API calls during a session.\n\n### Security\n- Only authenticated users with the 'admin' role SHALL be able to update the settings.\n- The API endpoint for updating settings must be protected.\n\n### Usability\n- The admin interface should be intuitive, with clear labels and validation feedback.\n",
  "fileStats": {
    "size": 3003,
    "lines": 51,
    "lastModified": "2025-11-30T12:32:36.287Z"
  },
  "comments": []
}
