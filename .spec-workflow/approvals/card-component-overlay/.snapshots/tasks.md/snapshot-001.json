{
  "id": "snapshot_1761891820365_bun3ghvr4",
  "approvalId": "approval_1761891820361_5lrvmtdg9",
  "approvalTitle": "Card Component Overlay Implementation Tasks",
  "version": 1,
  "timestamp": "2025-10-31T06:23:40.365Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Tasks Document\n\n- [ ] 1. Extend database schema with overlay fields\n  - File: packages/db/schema.ts\n  - Add overlay fields to posts table: overlay_enabled, overlay_title, overlay_subtitle, overlay_placement, overlay_cta_text, overlay_gradient_enabled, overlay_gradient_direction\n  - Update Drizzle ORM types automatically\n  - Purpose: Enable storage of overlay configuration data per blog post\n  - _Leverage: existing posts table structure in packages/db/schema.ts_\n  - _Requirements: Requirement 5 (Database Schema Extension)_\n  - _Prompt: Role: Database Engineer with expertise in Drizzle ORM and SQLite schema design | Task: Extend the posts table in packages/db/schema.ts with overlay fields following requirement 5, maintaining backward compatibility and proper default values | Restrictions: Do not modify existing fields, ensure proper data types and constraints, maintain schema migration compatibility | Success: Schema compiles without errors, overlay fields are properly defined with appropriate defaults, Drizzle types are updated automatically_\n\n- [ ] 2. Update API routes to handle overlay data\n  - File: apps/api/src/routes/posts.ts\n  - Modify POST/PUT /api/posts endpoints to accept overlay fields\n  - Update GET /api/posts/:id to return overlay data\n  - Add validation for overlay field constraints\n  - Purpose: Enable CRUD operations for overlay settings through API\n  - _Leverage: existing posts API routes, Hono framework patterns_\n  - _Requirements: API Updates section in design.md_\n  - _Prompt: Role: API Developer with expertise in Hono and RESTful API design | Task: Update posts API routes to handle overlay data following the API Updates section in design.md, maintaining existing functionality while adding overlay field support | Restrictions: Must maintain backward compatibility, validate overlay field constraints, follow existing API patterns and error handling | Success: API accepts and returns overlay data correctly, validation prevents invalid data, existing functionality remains intact_\n\n- [ ] 3. Extend BlogPost TypeScript interfaces\n  - File: packages/types/blog.ts\n  - Add overlay properties to BlogPost interface\n  - Update related type definitions\n  - Purpose: Provide type safety for overlay functionality across the application\n  - _Leverage: existing BlogPost interface in packages/types/blog.ts_\n  - _Requirements: Extended BlogPost Model in design.md_\n  - _Prompt: Role: TypeScript Developer specializing in type systems and interface design | Task: Extend the BlogPost interface in packages/types/blog.ts with overlay properties following the Extended BlogPost Model in design.md | Restrictions: Maintain backward compatibility, do not break existing interfaces, ensure proper optional typing for overlay fields | Success: TypeScript compilation succeeds, overlay properties are properly typed, existing code continues to work without changes_\n\n- [ ] 4. Extend BlogComposer with overlay settings section\n  - File: apps/admin/app/components/BlogComposer.tsx\n  - Add overlay configuration UI section with form fields\n  - Implement conditional display based on overlayEnabled toggle\n  - Add Zod validation for overlay fields\n  - Purpose: Provide admin interface for configuring overlay text and settings\n  - _Leverage: existing BlogComposer component, UI components from packages/ui_\n  - _Requirements: BlogComposer Overlay Section in design.md_\n  - _Prompt: Role: React Developer with expertise in form handling and UI components | Task: Extend BlogComposer component with overlay settings section following the BlogComposer Overlay Section specification in design.md, using existing UI components and form patterns | Restrictions: Must integrate seamlessly with existing form, maintain form validation flow, follow existing UI patterns and accessibility standards | Success: Overlay settings section appears correctly, form validation works for overlay fields, UI is consistent with existing admin interface_\n\n- [ ] 5. Create OverlayContainer component\n  - File: apps/web/src/components/OverlayContainer.tsx\n  - Implement positioning logic for overlay text placement\n  - Handle responsive behavior and class generation\n  - Purpose: Provide reusable container for overlay text positioning\n  - _Leverage: Tailwind CSS utility classes, existing component patterns_\n  - _Requirements: OverlayContainer Component in design.md_\n  - _Prompt: Role: Frontend Developer specializing in React components and CSS positioning | Task: Create OverlayContainer component following the OverlayContainer Component specification in design.md, implementing positioning logic and responsive behavior | Restrictions: Must use Tailwind classes for positioning, maintain performance with efficient class generation, support all placement options | Success: Component renders overlay content at correct positions, responsive behavior works across breakpoints, integrates seamlessly with BlogPostCard_\n\n- [ ] 6. Extend BlogPostCard with overlay rendering\n  - File: apps/web/src/components/BlogPostCard.tsx\n  - Add overlay props to component interface\n  - Implement conditional overlay rendering logic\n  - Integrate OverlayContainer for text positioning\n  - Purpose: Display overlay text and gradients on blog post cards\n  - _Leverage: existing BlogPostCard component, new OverlayContainer component_\n  - _Requirements: BlogPostCard Component (Enhanced) in design.md_\n  - _Prompt: Role: React Developer with expertise in component composition and conditional rendering | Task: Extend BlogPostCard component with overlay rendering following the BlogPostCard Component specification in design.md, integrating OverlayContainer and maintaining existing functionality | Restrictions: Must not break existing card variants, overlay rendering must be conditional and performant, maintain accessibility standards | Success: Overlay text appears correctly on cards when enabled, positioning works for all placement options, existing card functionality remains intact_\n\n- [ ] 7. Implement gradient overlay styling\n  - File: apps/web/src/components/BlogPostCard.tsx (styling updates)\n  - Add Tailwind gradient classes for overlay backgrounds\n  - Implement gradient direction mapping\n  - Ensure proper contrast for overlay text\n  - Purpose: Provide visual gradient backgrounds for overlay text readability\n  - _Leverage: Tailwind CSS gradient utilities, existing card styling patterns_\n  - _Requirements: Gradient overlay specifications in original PRD_\n  - _Prompt: Role: Frontend Developer specializing in CSS and visual design | Task: Implement gradient overlay styling in BlogPostCard following the gradient specifications in the original PRD, ensuring proper text contrast and visual appeal | Restrictions: Must use Tailwind gradient classes, maintain performance, ensure WCAG contrast compliance | Success: Gradient overlays appear correctly with proper contrast, all gradient directions work as specified, visual design matches PRD requirements_\n\n- [ ] 8. Add responsive overlay behavior\n  - File: apps/web/src/components/OverlayContainer.tsx and BlogPostCard.tsx\n  - Implement mobile-specific padding and positioning\n  - Ensure overlay text truncation works properly\n  - Test overlay behavior across all breakpoints\n  - Purpose: Provide optimal overlay experience on all device sizes\n  - _Leverage: Tailwind responsive utilities, existing responsive patterns_\n  - _Requirements: Responsive Design Maintenance requirement_\n  - _Prompt: Role: Frontend Developer with expertise in responsive design and mobile optimization | Task: Implement responsive overlay behavior following the Responsive Design Maintenance requirement, ensuring proper display across all device sizes | Restrictions: Must maintain horizontal card layout on mobile, implement proper text truncation, follow existing responsive patterns | Success: Overlay displays correctly on all screen sizes, text truncation works properly, mobile experience matches design specifications_\n\n- [ ] 9. Add form validation for overlay fields\n  - File: apps/admin/app/components/BlogComposer.tsx\n  - Extend Zod schema with overlay field validation\n  - Add character limits and format validation\n  - Display validation errors in UI\n  - Purpose: Ensure overlay data integrity and provide user feedback\n  - _Leverage: existing Zod validation patterns in BlogComposer_\n  - _Requirements: Form validation requirements in design.md_\n  - _Prompt: Role: Frontend Developer with expertise in form validation and Zod schema design | Task: Add comprehensive form validation for overlay fields in BlogComposer following the validation requirements in design.md | Restrictions: Must integrate with existing form validation, provide clear error messages, enforce character limits and format constraints | Success: Form validation prevents invalid overlay data, error messages are clear and helpful, validation integrates seamlessly with existing form flow_\n\n- [ ] 10. Create unit tests for overlay components\n  - File: apps/web/src/components/__tests__/OverlayContainer.test.tsx\n  - File: apps/web/src/components/__tests__/BlogPostCard.test.tsx\n  - Test overlay rendering logic and positioning\n  - Test responsive behavior and conditional rendering\n  - Purpose: Ensure overlay components work correctly and prevent regressions\n  - _Leverage: existing testing patterns, Vitest framework_\n  - _Requirements: Unit Testing section in design.md_\n  - _Prompt: Role: QA Engineer with expertise in React component testing and Vitest | Task: Create comprehensive unit tests for overlay components following the Unit Testing section in design.md, covering rendering logic, positioning, and responsive behavior | Restrictions: Must test component logic in isolation, use proper mocking for dependencies, maintain test performance | Success: All overlay functionality is tested, tests catch regressions, component behavior is validated across different props and states_\n\n- [ ] 11. Create integration tests for overlay workflow\n  - File: apps/admin/__tests__/BlogComposer.integration.test.tsx\n  - File: apps/web/__tests__/BlogPostCard.integration.test.tsx\n  - Test complete overlay configuration and display flow\n  - Test API integration for overlay data\n  - Purpose: Ensure end-to-end overlay functionality works correctly\n  - _Leverage: existing integration testing patterns, Playwright for E2E_\n  - _Requirements: Integration Testing section in design.md_\n  - _Prompt: Role: QA Engineer with expertise in integration testing and Playwright | Task: Create integration tests for the complete overlay workflow following the Integration Testing section in design.md, covering admin configuration through frontend display | Restrictions: Must test real user workflows, ensure proper API integration, maintain test reliability | Success: Complete overlay workflow is tested, API integration works correctly, tests validate end-to-end functionality_\n\n- [ ] 12. Add accessibility features for overlay text\n  - File: apps/web/src/components/OverlayContainer.tsx and BlogPostCard.tsx\n  - Ensure proper contrast ratios for overlay text\n  - Add focus management for interactive overlay elements\n  - Implement proper ARIA labels where needed\n  - Purpose: Make overlay text accessible to all users\n  - _Leverage: existing accessibility patterns, WCAG guidelines_\n  - _Requirements: Usability requirements in design.md_\n  - _Prompt: Role: Accessibility Specialist with expertise in WCAG compliance and inclusive design | Task: Add accessibility features for overlay text following the Usability requirements in design.md, ensuring proper contrast and keyboard navigation | Restrictions: Must meet WCAG AA standards, maintain visual design integrity, ensure screen reader compatibility | Success: Overlay text meets accessibility standards, keyboard navigation works properly, screen readers can access overlay content_\n\n- [ ] 13. Performance optimization for overlay rendering\n  - File: apps/web/src/components/BlogPostCard.tsx\n  - Optimize conditional rendering logic\n  - Minimize CSS class generation overhead\n  - Ensure overlay doesn't impact page load performance\n  - Purpose: Maintain fast page loading with overlay functionality\n  - _Leverage: existing performance optimization patterns, React.memo where appropriate_\n  - _Requirements: Performance requirements in design.md_\n  - _Prompt: Role: Performance Engineer with expertise in React optimization and web performance | Task: Optimize overlay rendering performance following the Performance requirements in design.md, ensuring overlays don't impact page load times | Restrictions: Must maintain functionality while improving performance, use appropriate React optimization techniques, ensure Core Web Vitals are not negatively impacted | Success: Overlay functionality has minimal performance impact, page load times remain under 2 seconds, Core Web Vitals scores are maintained_\n\n- [ ] 14. Documentation and cleanup\n  - Update component documentation with overlay props\n  - Add usage examples for overlay functionality\n  - Clean up any temporary code or comments\n  - Purpose: Ensure maintainability and proper documentation\n  - _Leverage: existing documentation patterns, JSDoc comments_\n  - _Requirements: Implementation Plan completion in design.md_\n  - _Prompt: Role: Technical Writer with expertise in API documentation and code commenting | Task: Complete documentation and cleanup following the Implementation Plan in design.md, ensuring all overlay functionality is properly documented | Restrictions: Must follow existing documentation patterns, ensure code comments are accurate and helpful, remove any development artifacts | Success: All overlay functionality is documented, code is clean and maintainable, team can easily understand and extend the implementation_\n",
  "fileStats": {
    "size": 13772,
    "lines": 138,
    "lastModified": "2025-10-31T06:23:36.309Z"
  },
  "comments": []
}